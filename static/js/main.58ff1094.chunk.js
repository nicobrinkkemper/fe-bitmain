(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{67:function(e,t,r){e.exports=r(98)},72:function(e,t,r){},74:function(e,t,r){},80:function(e,t,r){},98:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r.n(a),c=r(56),i=r.n(c),o=(r(72),r(74),r(41)),l=r(43),s="LIST_ORDERS_ERROR",u="LIST_ORDERS_RECEIVED",d="RESET_LIST_ORDERS_RECEIVED",p="ADD_ORDER",E="MATCH_ORDER",m="TOGGLE_MATCH",O=r(99),f=r(102),b=r(20),y=r(103),h=r(104),R=r(105),j=r(106),v=r(111),S=r(110),g=r(100),_=r(107),T=r(112),N=function(){return{type:"LIST_ORDERS_REQUEST",payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:5001/listOrders?start=0&size=100"}},w=function(){return{type:"RESET_LIST_ORDERS_REQUEST",payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:5001/reset"}},D=function(e){return N(function(e,t){var r=function(e){return isNaN(parseInt(e))?0:parseInt(e)},a=new URL(e),n=r(a.searchParams.get("start")),c=r(a.searchParams.get("size")),i=n+t,o=!!a.searchParams.get("slowDown")||i%c!==0,l=o?"&slowDown=true":"",s=o?t+2:t;return"".concat(a.origin,"/listOrders?start=").concat(i,"&size=").concat(s).concat(l)}(e.payload.request.url,e.payload.response.length))},I=[u,s,d].map(function(e){return function(t){return{type:e,payload:t}}}),L=Object(l.a)(I,3),q=L[0],U=L[1],k=L[2],M=function(e){return Object(S.a)(e.pipe(Object(O.a)("LIST_ORDERS_REQUEST"),Object(f.a)(function(e){return Object(T.a)(e.payload).pipe(Object(b.a)(q),Object(y.a)(function(e){return Object(g.a)(U(e))}))}),Object(h.a)(e.ofType("RESET_LIST_ORDERS_REQUEST")),Object(R.a)()),e.pipe(Object(O.a)(u),Object(j.a)(function(e){return new URL(e.payload.request.url).searchParams.get("slowDown")?Object(_.a)(2e3):Object(_.a)(200)}),Object(b.a)(D),Object(h.a)(e.ofType("RESET_LIST_ORDERS_REQUEST")),Object(R.a)()),e.pipe(Object(O.a)("RESET_LIST_ORDERS_REQUEST"),Object(f.a)(function(e){return Object(T.a)(e.payload).pipe(Object(b.a)(k),Object(y.a)(function(e){return Object(g.a)(U(e))}))})),e.pipe(Object(O.a)(s),Object(v.a)(2e3),Object(b.a)(function(){return w()})),e.pipe(Object(O.a)(d),Object(b.a)(function(){return N()})))},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"LIST_ORDERS_REQUEST":case"RESET_LIST_ORDERS_REQUEST":return!0;case u:return!1;default:return e}},x=r(46),C=r(47),A="sell",B="buy",P="match",z=r(45),V=function(e){return e.quantity>0},G=function(e,t){var r=e.ts;return t.ts-r},H=function(e,t){return e.id-t.id},J=function(e){return e.type===B},W=function(e){return e.type===A},X=function(e){return e.type===P},$=function(e,t){return e.price-t.price},F=function(e,t){var r=e.price;return t.price-r},K=Object(z.a)(function(e){return e.filter(X)},function(e){return e.sort(G).slice(0,30)}),Y=Object(z.a)(function(e){return e.filter(W)},function(e){return e.filter(V).sort(H).sort(F).slice(0,20)}),Z=Object(z.a)(function(e){return e.filter(J)},function(e){return e.filter(V).sort(H).sort($).slice(0,20)}),ee=[p,m,E].map(function(e){return function(t){return{type:e,payload:t}}}),te=Object(l.a)(ee,3),re=te[0],ae=te[1],ne=te[2],ce=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case m:var a=r.payload;return t.map(function(e){return e.id===a.id?Object(C.a)({},e,{toggled:!e.toggled}):e});case"RESET_LIST_ORDERS_REQUEST":case d:return[];case u:return r.payload.response.map(re).reduce(e,t);case p:var n=r.payload;if(!V(n))return Object(x.a)(t).concat([n]);var c=t.find(function(e){return W(e)?function(t){return J(t)&&V(t)&&t.price>=e.price}:function(t){return W(t)&&V(t)&&t.price<=e.price}}(n));return c?e(t,ne({order:n,counterOrder:c})):Object(x.a)(t).concat([n]);case E:var i=r.payload,o=i.order,l=i.counterOrder,s=(o.price+l.price)/2,O=Math.min(o.quantity,l.quantity),f=Date.now(),b=Object(C.a)({},o,{quantity:o.quantity-O}),y=Object(C.a)({},l,{quantity:l.quantity-O}),h={id:o.id+"-"+l.id,type:P,orderResult:b,counterOrderResult:y,order:o,counterOrder:l,price:s,quantity:O,ts:f,toggled:!1};return e(Object(x.a)(t.map(function(e){return e.id===l.id?y:e})).concat([h]),re(b));default:return t}},ie=r(60),oe=r(61),le=r(64),se=r(62),ue=r(65),de=(r(80),r(53)),pe=r(63),Ee=r.n(pe);de.a.locale(Ee.a);var me=new de.a("en-US"),Oe=function(e){var t=e.show;return n.a.createElement("div",{className:"Spinner".concat(t?" show":"")},n.a.createElement("div",{className:"lds-ring"},n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null)))},fe=function(e){return n.a.createElement("div",{className:"MatchInfo"},n.a.createElement("div",{className:"ts"},"Matched ",me.format(e.ts)),n.a.createElement("div",null,"Before:"),n.a.createElement("div",{className:"order ".concat(e.order.type)},e.order.quantity,"x",e.order.price,"btc"),n.a.createElement("div",{className:"order ".concat(e.counterOrder.type)},e.counterOrder.quantity,"x",e.counterOrder.price,"btc"),n.a.createElement("div",null,"After:"),n.a.createElement("div",{className:"order ".concat(e.order.type)},e.orderResult.quantity?e.orderResult.quantity+"x"+e.orderResult.price+"btc":"Depleted"),n.a.createElement("div",{className:"order ".concat(e.counterOrder.type)},e.counterOrderResult.quantity?e.counterOrderResult.quantity+"x"+e.counterOrderResult.price+"btc":"Depleted"))},be=function(e){var t=e.reset,r=e.sells,a=e.buys,c=e.matches,i=e.isLoading,o=e.toggleMatch;return n.a.createElement("div",{className:"OrderBook"},n.a.createElement("div",{className:"Orders"},n.a.createElement("ul",{id:"buy"},n.a.createElement("li",{id:"reset-header",className:"header"},n.a.createElement("a",{href:"#reset",onClick:t},"Reset")),n.a.createElement("li",{id:"buy-header",className:"header"},n.a.createElement("span",null,"Buys")),a.map(function(e){return n.a.createElement("li",{key:e.id,id:"order-".concat(e.id),className:"order buy"},n.a.createElement("span",{className:"tinyId"},e.id),n.a.createElement("span",{className:"descriptor"},e.quantity,"x",e.price,"btc"))})),n.a.createElement("ul",{id:"sell"},n.a.createElement("li",{id:"fillsell-header",className:"header"}),n.a.createElement("li",{id:"sell-header",className:"header"},n.a.createElement("span",null,"Sells")),r.map(function(e){return n.a.createElement("li",{key:e.id,id:"order-".concat(e.id),className:"order sell"},n.a.createElement("span",{className:"tinyId"},e.id),n.a.createElement("span",{className:"descriptor"},e.quantity,"x",e.price,"btc"))})),n.a.createElement("ul",{id:"match"},n.a.createElement("li",{id:"loading-header",className:"header"},n.a.createElement(Oe,{show:i})),n.a.createElement("li",{id:"match-header",className:"header"},n.a.createElement("span",null,"Matches")),c.map(function(e){return n.a.createElement("li",{onClick:function(){return o(e)},key:e.id,id:"match-".concat(e.id),className:"order match".concat(e.toggled?" toggled":"")},n.a.createElement("div",{className:"toggle"},n.a.createElement("span",{className:"tinyId"},e.id),n.a.createElement("span",{className:"descriptor"},e.quantity,"x",e.price,"btc"),e.toggled?n.a.createElement(fe,e):null))}))))},ye=function(e){function t(){return Object(ie.a)(this,t),Object(le.a)(this,Object(se.a)(t).apply(this,arguments))}return Object(ue.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.props.listOrders()}},{key:"render",value:function(){var e=this.props,t=e.sells,r=e.buys,a=e.matches,c=e.toggleMatch,i=e.isLoading,o=e.reset;return n.a.createElement(be,{sells:t,buys:r,matches:a,toggleMatch:c,isLoading:i,reset:o})}}]),t}(a.Component),he=Object(o.b)(function(e){return{sells:Y(e.orders),buys:Z(e.orders),matches:K(e.orders),isLoading:e.listOrders}},function(e){return{listOrders:function(){return e(N())},toggleMatch:function(t){return e(ae(t))},reset:function(){return e(w())}}})(ye),Re=r(16),je=r(109),ve=r(108),Se=Object(je.a)();var ge=function(){var e=Object(ve.a)(M),t=Object(Re.c)({listOrders:Q,orders:ce}),r=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Re.d,a=Object(Re.e)(t,r(Object(Re.a)(Se)));return Se.run(e),a}(),_e=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(o.a,{store:ge},n.a.createElement(he,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[67,2,1]]]);
//# sourceMappingURL=main.58ff1094.chunk.js.map